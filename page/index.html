<!DOCTYPE html>
<html lang="ro">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<title>Orient Invest</title>
		<link
			href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap"
			rel="stylesheet"
		/>
		<style>
			:root {
				--primary-color: #0d1b2a;
				--secondary-color: #1b263b;
				--accent-color: #00b4d8;
				--text-color: #f8f9fa;
			}

			* { margin: 0; padding: 0; box-sizing: border-box; }
			body { font-family: "Inter", sans-serif; background-color: var(--primary-color); color: var(--text-color); line-height: 1.6; }
			header { background-color: var(--secondary-color); padding: 20px 40px; display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; position: sticky; top: 0; z-index: 1001; }
			.logo a { display: flex; flex-direction: column; align-items: flex-start; text-decoration: none; color: inherit; }
			.logo h1 { font-size: 2rem; color: var(--accent-color); }
			.logo p { font-size: 1rem; margin-top: 5px; color: #ccc; }
			nav.desktop-menu { display: flex; gap: 20px; }
			nav a { color: var(--text-color); text-decoration: none; font-weight: 600; transition: color 0.3s; position: relative; padding-right: 20px; }
			nav a:hover { color: var(--accent-color); }
			nav a::after { content: "›"; position: absolute; right: 0; top: 50%; transform: translateY(-50%); color: var(--accent-color); font-weight: 700; font-size: 1.2rem; transition: color 0.3s; }
			nav a:hover::after { color: #00e0ff; }
			.menu-toggle { display: none; flex-direction: column; cursor: pointer; z-index: 1002; }
			.menu-toggle span { height: 3px; width: 25px; background-color: var(--text-color); margin: 4px 0; }
			nav.mobile-menu { flex-direction: column; background-color: var(--secondary-color); position: fixed; top: 0; right: 0; width: 250px; height: 100vh; padding: 120px 20px 60px; z-index: 1000; transform: translateX(100%); transition: transform 0.3s ease-in-out, opacity 0.3s ease-in-out; opacity: 0; pointer-events: none; display: flex; justify-content: flex-start; }
			nav.mobile-menu.open { transform: translateX(0); opacity: 1; pointer-events: auto; }
			nav.mobile-menu a { margin-bottom: 20px; font-size: 1.4rem; padding: 12px 0; user-select: none; position: relative; padding-right: 20px; transition: color 0.3s; }
			nav.mobile-menu a::after { content: "›"; position: absolute; right: 0; top: 50%; transform: translateY(-50%); color: var(--accent-color); font-weight: 700; font-size: 1.4rem; transition: color 0.3s; }
			nav.mobile-menu a:hover::after { color: #00e0ff; }
			nav.mobile-menu a:hover { color: var(--accent-color); }
			.mobile-menu-footer { margin-top: auto; padding-top: 10px; border-top: 1px solid #334155; color: #888; font-size: 0.9rem; text-align: center; user-select: none; }

			main { max-width: 1000px; margin: 40px auto; padding: 20px; background-color: #112031; border-radius: 16px; box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3); text-align: center; }
			.slogan { font-size: 2.4rem; color: var(--accent-color); font-weight: 700; margin-bottom: 20px; }
			.description { font-size: 1.2rem; color: #d0d0d0; margin-bottom: 40px; max-width: 800px; margin: 0 auto 40px; }

			.dropdown-container { text-align: center; margin-bottom: 30px; }
			label { font-weight: 600; display: block; margin-bottom: 10px; text-align: center; }
			select { padding: 10px; font-size: 1rem; background-color: var(--secondary-color); color: var(--text-color); border: 1px solid #334155; border-radius: 8px; text-align-last: center; }
			img { max-width: 100%; border-radius: 12px; box-shadow: 0 4px 15px rgba(0, 0, 0, 0.4); }

			.etf-list-container { margin-top: 40px; padding: 30px 20px; background-color: #1a2c43; border-radius: 16px; text-align: center; }
			.etf-list-container h2 { margin-bottom: 20px; color: var(--accent-color); font-weight: 700; font-size: 1.5rem; }
			.selected-etfs { margin-top: 20px; display: flex; flex-wrap: wrap; gap: 10px; justify-content: center; }
			.etf-tag { background-color: #334155; padding: 10px 15px; border-radius: 20px; display: flex; align-items: center; gap: 10px; color: white; }
			.etf-tag button { background: transparent; border: none; color: red; cursor: pointer; font-size: 1rem; font-weight: bold; }

			#train-model-btn {
				margin-top: 30px;
				padding: 12px 24px;
				font-size: 1rem;
				font-weight: 600;
				color: var(--text-color);
				background-color: var(--accent-color);
				border: none;
				border-radius: 8px;
				cursor: pointer;
				transition: background-color 0.3s;
			}
			#train-model-btn:hover { background-color: #00e0ff; }

			footer { padding: 20px 0; text-align: center; color: #ccc; font-size: 0.9rem; }
			@media (max-width: 768px) { nav.desktop-menu { display: none; } .menu-toggle { display: flex; } }
		</style>
	</head>
	<body>
		<header> ... </header>
		<main>
			<section> ... </section>

			<section class="etf-list-container">
				<h2>Selectează ETF-uri pentru portofoliu:</h2>
				<select id="etf-dropdown">
					<option value="TVBETETF.RO">TVBETETF.RO</option>
					<option value="ROX.DE">ROX.DE</option>
					<option value="EPOL">EPOL</option>
					<option value="IPOLL.XC">IPOLL.XC</option>
					<option value="PLX.DE">PLX.DE</option>
				</select>
				<div class="selected-etfs" id="selected-etfs"></div>
				<button id="train-model-btn">Train Model</button>
			</section>
		</main>

		<footer> ... </footer>

		<script>
			function updateImage() { /* existing code */ }
			function toggleMenu() { /* existing code */ }

			const dropdown = document.getElementById("etf-dropdown");
			const selectedEtfsContainer = document.getElementById("selected-etfs");

			dropdown.addEventListener("change", () => {
				const value = dropdown.value;
				const label = dropdown.options[dropdown.selectedIndex].text;

				if (!document.getElementById(value)) {
					const tag = document.createElement("div");
					tag.className = "etf-tag";
					tag.id = value;
					tag.innerHTML = `${label} <button onclick="removeEtf('${value}')">X</button>`;
					selectedEtfsContainer.appendChild(tag);
				}
			});

			function removeEtf(id) { const tag = document.getElementById(id); if (tag) tag.remove(); }

			// Train Model button handler
			document.getElementById("train-model-btn").addEventListener("click", () => {
				const tags = Array.from(selectedEtfsContainer.children).map(el => el.id);
				if (tags.length === 0) { alert("Selectează cel puțin un ETF înainte de antrenare."); return; }

				console.log(JSON.stringify(tags))

				fetch('http://127.0.0.1:8000/process', {
					method: 'POST',
					headers: { 'Content-Type': 'application/json' },
					body: JSON.stringify(tags)
				})
				.then(res => res.json())
				.then(data => { console.log('API răspuns:', data); })
				.catch(err => { console.error(err); alert('Eroare la antrenare.'); });
			});

			fetch('http://127.0.0.1:8000/get_etfs', {
					method: 'GET',
					headers: { 'Content-Type': 'application/json' }
				})
				.then(res => res.json())
				.then(data => { console.log('API răspuns:', data); })
				.catch(err => { console.error(err); alert('get_etfs error.'); });
		</script>
	</body>
</html>
